<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Resample <code>draws</code> objects — resample_draws • posterior</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Resample <code>draws</code> objects — resample_draws" />
<meta property="og:description" content="Resample draws objects according to given weights obtained,
for instance, through importance sampling." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">posterior</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://mc-stan.org/rstan">rstan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/cmdstanr">cmdstanr</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstanarm">rstanarm</a>
    </li>
    <li>
      <a href="https://mc-stan.org/bayesplot">bayesplot</a>
    </li>
    <li>
      <a href="https://mc-stan.org/shinystan">shinystan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/loo">loo</a>
    </li>
    <li>
      <a href="https://mc-stan.org/projpred">projpred</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstantools">rstantools</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://mc-stan.org">Stan</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/posterior">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://discourse.mc-stan.org/">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Resample <code>draws</code> objects</h1>
    <small class="dont-index">Source: <a href='https://github.com/stan-dev/posterior/blob/master/R/resample_draws.R'><code>R/resample_draws.R</code></a></small>
    <div class="hidden name"><code>resample_draws.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Resample <code><a href='draws.html'>draws</a></code> objects according to given weights obtained,
for instance, through importance sampling.</p>
    </div>

    <pre class="usage"><span class='fu'>resample_draws</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for draws</span>
<span class='fu'>resample_draws</span>(<span class='no'>x</span>, <span class='kw'>weights</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"stratified"</span>, <span class='kw'>ndraws</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>An <span style="R">R</span> object for which the methods are defined.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed to individual methods (if applicable).</p></td>
    </tr>
    <tr>
      <th>weights</th>
      <td><p>A vector of positive weights of length equal to the number of
draws in <code>draws</code> (as obtained by method <code><a href='draws-index.html'>ndraws</a></code>). Weights will be
internally normalized. If <code>weights</code> is <code>NULL</code> (the default), an attempt
will be made to extract weights stored already in the draws object (via
<code><a href='weight_draws.html'>weight_draws</a></code>). How exactly the weights influence the resampling
depends on the <code>method</code> argument.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>Name of the resampling method being applied. Possible choices
are <code>"simple"</code> for simple random resampling with replacement,
<code>"simple_no_replace"</code> for simple random resampling without replacement,
<code>"stratified"</code> for stratified resampling with replacement and
<code>"deterministic"</code> for deterministic resampling with replacement. Currently,
<code>"stratified"</code> is the default as it has comparably low variance and bias
with respect to ideal resampling. The latter would sample perfectly
proportional to the weights but is not possible in practice where only a
finite number of draws are available. For more details about resampling
methods, see Kitagawa (1996).</p></td>
    </tr>
    <tr>
      <th>ndraws</th>
      <td><p>Number of draws to be returned. By default (<code>NULL</code>), <code>ndraws</code>
is set internally to the total number of draws in <code>x</code> if sensible.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>draws</code> object of the same class as <code>x</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Upon usage of <code>resample_draws</code>, chains will be automatically merged
due to subsetting of individual draws (see <code><a href='subset_draws.html'>subset_draws</a></code> for details).</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Kitagawa, G., Monte Carlo Filter and Smoother for Non-Gaussian Nonlinear '
State Space Models, <em>Journal of Computational and Graphical Statistics</em>,
5(1):1-25, 1996.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='draws_df.html'>as_draws_df</a></span>(<span class='fu'><a href='example_draws.html'>example_draws</a></span>())

<span class='co'># random weights for illustrationary purposes</span>
<span class='no'>w</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span>(<span class='fu'><a href='draws-index.html'>ndraws</a></span>(<span class='no'>x</span>), <span class='fl'>0</span>, <span class='fl'>10</span>)

<span class='co'># use default stratified sampling</span>
<span class='no'>x_rs</span> <span class='kw'>&lt;-</span> <span class='fu'>resample_draws</span>(<span class='no'>x</span>, <span class='kw'>weights</span> <span class='kw'>=</span> <span class='no'>w</span>)</div><div class='output co'>#&gt; <span class='message'>Merging chains in order to subset via 'draw'.</span></div><div class='input'><span class='fu'><a href='draws_summary.html'>summarise_draws</a></span>(<span class='no'>x_rs</span>, <span class='fu'><a href='draws_summary.html'>default_summary_measures</a></span>())</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 10 x 7</span><span>
#&gt;    variable  mean median    sd   mad      q5   q95
#&gt;    </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> mu        4.29   4.38  3.39  3.45  -</span><span style='color: #BB0000;'>0.701</span><span>  9.73
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> tau       3.99   2.92  3.41  2.76   0.309 11.0 
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> theta[1]  6.55   6.05  5.81  4.57  -</span><span style='color: #BB0000;'>0.982</span><span> 17.3 
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> theta[2]  5.04   5.03  4.82  4.35  -</span><span style='color: #BB0000;'>2.87</span><span>  12.3 
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> theta[3]  3.03   4.14  6.97  4.93 -</span><span style='color: #BB0000;'>10.8</span><span>   11.5 
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> theta[4]  4.89   5.26  4.78  4.70  -</span><span style='color: #BB0000;'>2.71</span><span>  12.2 
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> theta[5]  3.34   3.61  5.13  4.51  -</span><span style='color: #BB0000;'>5.93</span><span>  11.2 
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> theta[6]  4.23   4.34  5.01  4.99  -</span><span style='color: #BB0000;'>3.49</span><span>  10.7 
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> theta[7]  6.65   6.43  5.11  4.59  -</span><span style='color: #BB0000;'>1.19</span><span>  14.5 
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> theta[8]  4.83   4.84  4.55  4.59  -</span><span style='color: #BB0000;'>3.25</span><span>  11.8 </div><div class='input'>
<span class='co'># use simple random sampling</span>
<span class='no'>x_rs</span> <span class='kw'>&lt;-</span> <span class='fu'>resample_draws</span>(<span class='no'>x</span>, <span class='kw'>weights</span> <span class='kw'>=</span> <span class='no'>w</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"simple"</span>)</div><div class='output co'>#&gt; <span class='message'>Merging chains in order to subset via 'draw'.</span></div><div class='input'><span class='fu'><a href='draws_summary.html'>summarise_draws</a></span>(<span class='no'>x_rs</span>, <span class='fu'><a href='draws_summary.html'>default_summary_measures</a></span>())</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 10 x 7</span><span>
#&gt;    variable  mean median    sd   mad      q5   q95
#&gt;    </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span> mu        4.21   4.27  3.33  3.30  -</span><span style='color: #BB0000;'>0.854</span><span>  9.15
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span> tau       3.81   2.76  3.28  2.58   0.332 10.2 
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span> theta[1]  6.42   5.61  5.58  4.74  -</span><span style='color: #BB0000;'>1.75</span><span>  17.3 
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span> theta[2]  5.16   4.98  4.61  3.79  -</span><span style='color: #BB0000;'>2.78</span><span>  12.3 
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span> theta[3]  3.36   4.16  6.55  4.60 -</span><span style='color: #BB0000;'>10.3</span><span>   11.5 
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span> theta[4]  4.27   4.47  4.71  4.76  -</span><span style='color: #BB0000;'>4.40</span><span>  11.9 
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span> theta[5]  3.19   3.75  4.88  4.09  -</span><span style='color: #BB0000;'>6.54</span><span>  11.2 
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span> theta[6]  4.27   4.33  4.83  4.60  -</span><span style='color: #BB0000;'>3.49</span><span>  10.7 
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span> theta[7]  5.76   5.13  4.54  3.88  -</span><span style='color: #BB0000;'>1.19</span><span>  13.0 
#&gt; </span><span style='color: #BCBCBC;'>10</span><span> theta[8]  4.66   4.79  5.03  4.62  -</span><span style='color: #BB0000;'>3.44</span><span>  12.2 </div><div class='input'>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Paul-Christian Bürkner, Jonah Gabry, Matthew Kay, Aki Vehtari.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


